<!doctype html>
<notebook theme="air">
  <title>Draggable LocalFile fileInput</title>
  <script id="0" type="application/vnd.observable.javascript">
    md`# Draggable _LocalFile_ _fileInput_ 

    A combination of [@fil/fileuploader](/@fil/fileuploader) and [@mbostock/localfile](/@mbostock/localfile) for a draggable file input that has all the convenience methods of a FileAttachment (e.g. .json()) and has a hover effect. Quite a good example of how much nicer using the view literal is.

    I have not added many options, but [Suggestions](https://observablehq.com/@observablehq/suggestions-and-comments) are welcome.

    Usage:
    ~~~{js}
    import {fileInput} from "@tomlarkworthy/fileinput"

    ~~~
    `
  </script>
  <script id="421" type="application/vnd.observable.javascript">
    function fileInput({ prompt = 'Drag a file here', accept = null } = {}) {
      const output = Inputs.input();
      const input = htl.html`<input type="file">`;
      input.oninput = () => {
        output.value = new LocalFile(input.files[0]);
        output.dispatchEvent(new Event("input", { bubbles: true }));
      };

      input.ondragenter = evt => {
        input.classList.add("hover");
      };

      input.ondragleave = evt => {
        input.classList.remove("hover");
      };

      input.ondrop = evt => {
        input.classList.remove("hover");
      };

      return view`<div class="dropfileContainer">
        <style>
          .dropfileContainer > input[type=file] {
            width:100%;
            height:80px;
            background:#fefef2;
            border:solid 2px black;
            border-radius: 10px;
            padding-top: 10px;
          }

          .dropfileContainer > input[type=file].hover {
            background: #deded2;
          }
        </style>

        <p style="position: absolute;
                  margin-top: 30px;
                  margin-left: auto;
                  margin-right: auto;
                  left: 0;
                  right: 0;
                  text-align: center;
                  pointer-events: none;">
          ${prompt}
        </p>
        ${input}
        <!-- ${['...', output]} -->
      </div>`;
    }
  </script>
  <script id="286" type="application/vnd.observable.javascript" pinned="">
    viewof example_file = fileInput()
  </script>
  <script id="441" type="application/vnd.observable.javascript" pinned="">
    example_file.text()
  </script>
  <script id="340" type="application/vnd.observable.javascript">
    import { LocalFile } from '@mbostock/localfile'
  </script>
  <script id="283" type="application/vnd.observable.javascript">
    import { view } from '@tomlarkworthy/view'
  </script>
  <script id="463" type="application/vnd.observable.javascript" pinned="">
    import { footer } from "@tomlarkworthy/footer"
  </script>
  <script id="481" type="application/vnd.observable.javascript" pinned="">
    footer
  </script>
</notebook>
