<!doctype html>
<notebook theme="air">
  <title>Google Trends</title>
  <script id="0" type="application/vnd.observable.javascript" pinned="">
    md`# Google Trends
    `
  </script>
  <script id="83" type="application/vnd.observable.javascript" pinned="">
    iframe = new Promise(resolve => {
      let iframe = html`<iframe src="https://www.google.com" onload=${() => resolve(iframe)}></iframe>`
    })
  </script>
  <script id="90" type="application/vnd.observable.javascript" pinned="">
    content = (iframe.contentDocument || iframe.contentWindow.document);
  </script>
  <script id="85" type="application/vnd.observable.javascript" pinned="">
    deploy("trends", async (req, res) => {
      res.send(content)
    })
  </script>
  <script id="51" type="application/vnd.observable.javascript" pinned="">
    googleTrends = require('https://bundle.run/google-trends-api@4.9.2');
  </script>
  <script id="66" type="application/vnd.observable.javascript" pinned="">
    trends = deploy("trends", async (req, res) => {
      req.text(await googleTrends.interestOverTime({
        "keyword":"covid"
      }));
    })
  </script>
  <script id="72" type="application/vnd.observable.javascript" pinned="">
    t_response = fetch(trends.href)
  </script>
  <script id="77" type="application/vnd.observable.javascript" pinned="">
    t_response.status
  </script>
  <script id="79" type="application/vnd.observable.javascript" pinned="">
    t_response.text()
  </script>
  <script id="57" type="application/vnd.observable.javascript" pinned="">
    googleTrends.interestOverTime({
      "keyword":"covid",
      "agent": fetchp
    })
  </script>
  <script id="5" type="application/vnd.observable.javascript" pinned="">
    viewof terms = html`<input value = "covid">`
  </script>
  <script id="15" type="application/vnd.observable.javascript" pinned="">
    terms
  </script>
  <script id="17" type="application/vnd.observable.javascript" pinned="">
    response = fetchp("https://trends.google.com/trends/?geo=US")
  </script>
  <script id="36" type="application/vnd.observable.javascript" pinned="">
    response.status
  </script>
  <script id="38" type="application/vnd.observable.javascript" pinned="">
    await response.text()
  </script>
  <script id="40" type="application/vnd.observable.javascript" pinned="">
    Object.fromEntries(response.headers.entries())
  </script>
  <script id="21" type="application/vnd.observable.javascript">
    import {deploy} from '@tomlarkworthy/serverless-cells'
  </script>
  <script id="25" type="application/vnd.observable.javascript">
    import {fetchp} from '@tomlarkworthy/cors'
  </script>
</notebook>
