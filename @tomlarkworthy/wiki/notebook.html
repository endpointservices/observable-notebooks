<!doctype html>
<notebook theme="air">
  <title>Wiki tagged template with jscreole</title>
  <script id="0" type="application/vnd.observable.javascript">
    md`# Wiki tagged template with jscreole

    https://github.com/codeholic/jscreole

    Overwrite the _config_ variable to customize the Creale constructor args backing the wiki template literal. Comes preconfigured for [wikipedia](https://en.wikipedia.org/).

    ~~~js
    import {wiki} from '@tomlarkworthy/wiki'
    ~~~
    or

    ~~~js
    import {wiki} with {config as config} from '@tomlarkworthy/wiki'
    ~~~
    `
  </script>
  <script id="76" type="application/vnd.observable.javascript">
    md`## Examples`
  </script>
  <script id="25" type="application/vnd.observable.javascript" pinned="">
    wiki`
      * This is [[Wikipedia:Wikitext|wikitext]]
      * This is [[Kingdom of Romania]]
      * This is interpolated: ${Math.random()
        .toString(36)
        .substring(3)}
    `
  </script>
  <script id="59" type="application/vnd.observable.javascript" pinned="">
    config = ({
      interwiki: {},
      linkFormat: 'https://en.wikipedia.org/wiki/'
    })
  </script>
  <script id="4" type="application/vnd.observable.javascript">
    Creole = require('jscreole@0.9.0/lib/creole.js')
      .catch(() => window["creole"])
      .then(() => window["creole"])
  </script>
  <script id="14" type="application/vnd.observable.javascript" pinned="">
    creole = new Creole(config)
  </script>
  <script id="24" type="application/vnd.observable.javascript" pinned="">
    function wiki(strings, ...args) {
      const zippedStrings = strings.reduce((acc, cur, i) => {
        let arrToConcat = i === strings.length - 1 ? [cur] : [cur, args[i]];
        return [...acc, ...arrToConcat];
      }, []);

      const string = zippedStrings.join('');

      var span = document.createElement('span');
      creole.parse(span, string);
      return span;
    }
  </script>
</notebook>
