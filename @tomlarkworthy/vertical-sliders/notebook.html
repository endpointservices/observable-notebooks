<!doctype html>
<notebook theme="air">
  <title>Vertical Sliders</title>
  <script id="0" type="application/vnd.observable.javascript">
    md`# Vertical Sliders

    Put all your controls into a single row for less vertical scrolling

    ~~~js
    import {verticalSliders} from '@tomlarkworthy/vertical-sliders'
    ~~~

    Supported fields in the config are _mins, maxs, steps, values, names, labels_

    ~~~js
    viewof color = verticalSliders({
      names: ["r", "g", "b"],
      labels:["red", "green", "blue"],
      maxs:  [255,255,255],
      steps: [1,1,1]
    })
    ~~~

    Vertical sliders were used in [@tomlarkworthy/wormhole2](https://observablehq.com/@tomlarkworthy/wormhole2)
    `
  </script>
  <script id="4" type="application/vnd.observable.javascript">
    function verticalSliders(config = {}) {
      const len = (arr) => arr ? arr.length : undefined;
      let {
        n = len(config.values) ||
            len(config.mins) ||
            len(config.maxs) ||
            len(config.values) || 
            len(config.names) || 
            len(config.labels) || 
            1,
        mins = Array(n).fill(0),
        maxs = Array(n).fill(1),
        steps = Array(n).fill("any"),
        values = mins.map((min, idx) => (maxs[idx] + min) / 2),
        names = Array(n).fill(0).map((_, idx) => `${idx}`),
        labels = Array(n).fill("")
      } = config;
      return form(html`<form>
        <style>
          input[type=range][orient=vertical]
          {
            writing-mode: bt-lr; /* IE */
            -webkit-appearance: slider-vertical; /* WebKit */
            width: 8px;
            height: 175px;
            padding: 0 5px;
          }
        </style>
        <table style="table-layout: fixed; width:100%;text-align:center;">
        <tfoot>
          <tr style="font-size: 0.85rem;font-style:italic;">
            ${labels.map(label => html`<td>${label}</td>`)}
          </tr>
        </tfoot>
        <tbody>
          <tr>
            ${Array(n).fill(0).map((_, idx) => html`<td><input
              type=range
              name=${names[idx]}
              step=${steps[idx]}
              min=${mins[idx]}
              max=${maxs[idx]}
              value="${values[idx]}"
              orient=vertical></td>`)}
          </tr>
        </tbody></table>`)
    }
  </script>
  <script id="80" type="application/vnd.observable.javascript" pinned="">
    viewof demo = verticalSliders({
      values: Array(30).fill(0).map((_, i) => Math.sin(i/3 + now/500) / 2 + 0.5),
      labels: Array(30).fill(0).map((_, i) => i)
    })
  </script>
  <script id="25" type="application/vnd.observable.javascript">
    html`<div style="height: 50px;width: 50px;background-color: rgb(${color.r}, ${color.g}, ${color.b});"></div>`
  </script>
  <script id="52" type="application/vnd.observable.javascript">
    color
  </script>
  <script id="16" type="application/vnd.observable.javascript" pinned="">
    viewof color = verticalSliders({
      names: ["r", "g", "b"],
      labels:["red", "green", "blue"],
      maxs:  [255,255,255],
      steps: [1,1,1]
    })
  </script>
  <script id="129" type="application/vnd.observable.javascript" pinned="">
    import {form} from "@tomlarkworthy/mutable-form-input"
  </script>
</notebook>
