<!doctype html>
<notebook theme="air">
  <title>Isomorphic-git@1.30.1</title>
  <script id="0" type="text/markdown">
    # Isomorphic-git@1.30.1

    ~~~js
    import {git, http} from "@tomlarkworthy/isomorphic-git-1-30-1" 
    ~~~

    ~~~js
    import {FS} from "@tomlarkworthy/lightning-fs-4-6-0"
    ~~~
  </script>
  <script id="11" type="application/vnd.observable.javascript">
    git = {
      const blob = await unzip(
        FileAttachment("isomorphic-git-1@1.30.1.bundle.js.gz")
      );

      const objectURL = URL.createObjectURL(
        new Blob([blob], { type: "application/javascript" })
      );
      try {
        return await import(objectURL);
      } finally {
        URL.revokeObjectURL(objectURL);
      }
    }
  </script>
  <script id="61" type="application/vnd.observable.javascript">
    http = {
      const blob = await unzip(
        FileAttachment("isomorphic-git-http-1.0.0-beta.36.js.gz")
      );

      const objectURL = URL.createObjectURL(
        new Blob([blob], { type: "application/javascript" })
      );
      try {
        return await import(objectURL);
      } finally {
        URL.revokeObjectURL(objectURL);
      }
    }
  </script>
  <script id="54" type="text/markdown">

    ### bundle building
    ```
    npm install isomorphic-git@1.30.1

    // build.js
    import { build } from 'esbuild';
    import { http } from '@hyrious/esbuild-plugin-http';  // resolver for http/https URLs

    await build({
      stdin: {
        contents: 'export * from "https://cdn.jsdelivr.net/npm/isomorphic-git@1.30.1/+esm";',
        sourcefile: 'remote.js',
      },
      minify: true,
      bundle: true,
      format: 'esm',
      outfile: 'isomorphic-git@1.30.1.bundle.js',
      plugins: [http()],          // pulls the remote module tree and inlines it
    });


    node build.js
    gzip -9 isomorphic-git@1.30.1.bundle.js
    ```
  </script>
  <script id="9" type="application/vnd.observable.javascript">
    unzip = async (attachment) =>
      await new Response(
        (await attachment.stream()).pipeThrough(new DecompressionStream("gzip"))
      ).blob()
  </script>
</notebook>
