<!doctype html>
<notebook theme="air">
  <title>Simplest CMS</title>
  <script id="0" type="text/markdown">
    # Simplest CMS
  </script>
  <script id="20" type="text/markdown">
    Publicly viewable Google sheets can be queried client-side with no CORS issues in CSV format, by sheetname.

    `d3.csv` uses the first row to define the keys and returns array of objects.

    Together you can build an incredibly simple serverless content management system.

    I have sheet already setup [here](https://docs.google.com/spreadsheets/d/12oy6SbzN58lelbboOThhO_ly0mKC0tlZ4BVxlW10UZ8/edit?gid=0#gid=0) for an example
  </script>
  <script id="9" type="application/vnd.observable.javascript">
    sheetId = "12oy6SbzN58lelbboOThhO_ly0mKC0tlZ4BVxlW10UZ8"
  </script>
  <script id="13" type="application/vnd.observable.javascript">
    sheetName = "products"
  </script>
  <script id="25" type="text/markdown">
    The following fetches and decodes it in one line of code:
  </script>
  <script id="7" type="application/vnd.observable.javascript" pinned="">
    products = d3.csv(
      `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv&sheet=${sheetName}`
    )
  </script>
  <script id="27" type="text/markdown">
    The resultant array is a legible structured format for use in downstream processing:-
  </script>
  <script id="16" type="application/vnd.observable.javascript" pinned="">
    Inputs.table(products)
  </script>
</notebook>
