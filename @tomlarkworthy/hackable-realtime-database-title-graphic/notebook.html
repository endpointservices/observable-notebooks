<!doctype html>
<notebook theme="air">
  <title>Hackable Realtime Database Title Graphic</title>
  <script id="0" type="text/markdown">
    # Hackable Realtime Database Title Graphic
  </script>
  <script id="11" type="application/vnd.observable.javascript">
    gfx = svg`<svg viewBox="${-fov} ${-fov} ${2 * fov} ${2 * fov}"
    width="${Math.min(width, 640)}px" height="${
      (Math.min(width, 640) * 630) / 1200
    }px">
      <defs>

        <linearGradient id="sky" gradientTransform="rotate(90)">
          <stop offset="0%" stop-color="#120017" />
          <stop offset="50%" stop-color="#26117D" />
          <stop offset="80%" stop-color="#D800AF" />
          <stop offset="90%" stop-color="#FF9FB7" />
          <stop offset="100%" stop-color="#6149ED" />
        </linearGradient>

        <linearGradient id="rainbowFill" gradientTransform="rotate(90)">
          <stop offset="20%" stop-color="#ADA6FF" />
          <stop offset="45%" stop-color="#404CFF" />
          <stop offset="55%" stop-color="#3EFF94" />
          <stop offset="65%" stop-color="#FF8F00" />
          <stop offset="90%" stop-color="#FFA5A5" />
          <stop offset="100%" stop-color="#FFCE29" />
        </linearGradient>


        <radialGradient id="groundFill" cy="0%" r="1">
          <stop offset="0%" stop-color="#6149ED"/>
          <stop offset="100%" stop-color="#120017" />
        </radialGradient>


        <linearGradient id="surfaceFill" gradientTransform="rotate(90)">
          <stop offset="0%" stop-color="yellow"  stop-opacity="0"/>
          <stop offset="13%" stop-color="yellow"  stop-opacity="0"/>
          <stop offset="16%" stop-color="yellow" />
          <stop offset="100%" stop-color="orange" />
        </linearGradient>


        <linearGradient id="chromeFill" gradientTransform="rotate(90)">
          <stop offset="15%" stop-color="#4E4A5F" />
          <stop offset="20%" stop-color="#C7C1EC" />
          <stop offset="30%" stop-color="#C3C5DE" />
          <stop offset="45%" stop-color="#DFD9DF" />
          <stop offset="60%" stop-color="#837199" />
          <stop offset="65%" stop-color="#271B5C" />
          <stop offset="75%" stop-color="#D7DEF0" />
        </linearGradient>

        <rect id="ground" x="-1" y="0" width= "2" height="${
          1 * fov
        }" fill="url(#groundFill)"/>

        <rect id="surface" x="-1" y="0" width= "2" height="${
          1 * fov
        }" fill="url(#surfaceFill)"/>



      </defs>

      <rect x="-1" y="${-1 * fov}" width= "2" height="${
      1 * fov + horizonOffset
    }" fill="url(#sky)" />


      <rect id="ground" x="-1" y="${horizonOffset}" width= "2" height="${
      1 * fov - horizonOffset
    }" fill="url(#groundFill)" />


        <clipPath id="cells">
          ${Array.from({ length: 4 * 15 }).map((_, xy) =>
            square([(xy % 4) - 2, Math.floor(xy / 4), 1], "url(#ground)")
          )}
        </clipPath>

      <use clip-path="url(#cells)" href="#surface" />

      <text y=${hackableY} stroke="url(#chromeFill)" stroke-width="0.005" fill="url(#chromeFill)"
        text-anchor = "middle"
        style="font: italic bold 0.15px sans-serif; font-family: helvetica; letter-spacing: 0px;">
        HACKABLE
      </text>


      <text y=${realtimeY}
        fill="url(#rainbowFill)"
        stroke="url(#rainbowFill)"
        stroke-width="0.005"
        text-anchor = "middle"
        style="font-weight: bold; font-size:  0.15px; font-family: arial; letter-spacing: 0px;">
        Realtime Database
      </text>



    </svg>`
  </script>
  <script id="115" type="application/vnd.observable.javascript">
    viewof fov = Inputs.range([0, 2], { value: 0.5, label: "FOV" })
  </script>
  <script id="136" type="application/vnd.observable.javascript">
    viewof corner_radius = Inputs.range([0, 1], {
      value: 0.3,
      label: "corner_radius"
    })
  </script>
  <script id="142" type="application/vnd.observable.javascript">
    viewof padding = Inputs.range([0, 1], {
      value: 0.02,
      label: "padding"
    })
  </script>
  <script id="551" type="application/vnd.observable.javascript" pinned="">

  </script>
  <script id="451" type="application/vnd.observable.javascript">
    viewof horizonOffset = Inputs.range([-1, 1], {
      value: 0.07,
      label: "horizon offset"
    })
  </script>
  <script id="468" type="application/vnd.observable.javascript">
    viewof hackableY = Inputs.range([-1, 1], {
      value: -0.23,
      label: "hackableY"
    })
  </script>
  <script id="471" type="application/vnd.observable.javascript">
    viewof realtimeY = Inputs.range([-1, 1], {
      value: -0.04,
      label: "realtimeY"
    })
  </script>
  <script id="531" type="application/vnd.observable.javascript">
    viewof speed = Inputs.range([0, 10], {
      value: 1.5,
      label: "speed"
    })
  </script>
  <script id="34" type="application/vnd.observable.javascript" pinned="">
    project = (d) =>
      d.map((d) => [
        d[0] / (d[1] + 1), // screen x
        d[2] / (d[1] + 1) // screen y
      ])
  </script>
  <script id="21" type="application/vnd.observable.javascript" pinned="">
    square = ([dx, dy, dz], color) => {
      const id = `s(${dx},${dy},${dz})`;
      const rounding = corner_radius;

      const p = project([
        [dx + rounding + padding, dy + padding, dz],
        [dx + 1 - rounding - padding, dy + padding, dz],
        [dx + 1 - padding, dy + padding, dz],
        [dx + 1 - padding, dy + rounding + padding, dz],
        [dx + 1 - padding, dy + 1 - rounding - padding, dz],
        [dx + 1 - padding, dy + 1 - padding, dz],
        [dx + 1 - rounding - padding, dy + 1 - padding, dz],
        [dx + rounding + padding, dy + 1 - padding, dz],
        [dx + padding, dy + 1 - padding, dz],
        [dx + padding, dy + 1 - rounding - padding, dz],
        [dx + padding, dy + rounding + padding, dz],
        [dx + padding, dy + padding, dz],

        [dx + rounding + padding, dy + 1 + padding, dz],
        [dx + 1 - rounding - padding, dy + 1 + padding, dz],
        [dx + 1 - padding, dy + 1 + padding, dz],
        [dx + 1 - padding, dy + 1 + rounding + padding, dz],
        [dx + 1 - padding, dy + 1 + 1 - rounding - padding, dz],
        [dx + 1 - padding, dy + 1 + 1 - padding, dz],
        [dx + 1 - rounding - padding, dy + 1 + 1 - padding, dz],
        [dx + rounding + padding, dy + 1 + 1 - padding, dz],
        [dx + padding, dy + 1 + 1 - padding, dz],
        [dx + padding, dy + 1 + 1 - rounding - padding, dz],
        [dx + padding, dy + 1 + rounding + padding, dz],
        [dx + padding, dy + 1 + padding, dz]
      ]);
      const coord = (index) => `${p[index][0]} ${p[index][1]}`;

      const d0 = `M ${coord(0)}
    L ${coord(1)} 
    C ${coord(2)}, ${coord(2)}, ${coord(3)}
    L ${coord(4)}
    C ${coord(5)},${coord(5)},${coord(6)}
    L ${coord(7)} 
    C ${coord(8)},${coord(8)},${coord(9)}
    L ${coord(10)} 
    C ${coord(11)},${coord(11)},${coord(0)}
    Z`;

      const d1 = `M ${coord(0 + 12)}
    L ${coord(1 + 12)} 
    C ${coord(2 + 12)}, ${coord(2 + 12)}, ${coord(3 + 12)}
    L ${coord(4 + 12)}
    C ${coord(5 + 12)},${coord(5 + 12)},${coord(6 + 12)}
    L ${coord(7 + 12)} 
    C ${coord(8 + 12)},${coord(8 + 12)},${coord(9 + 12)}
    L ${coord(10 + 12)} 
    C ${coord(11 + 12)},${coord(11 + 12)},${coord(0 + 12)}
    Z`;

      return `<path id=${id} d="${d0}" fill="${color}">
    <animate xlink:href="#${id}"
        attributeName="d"
        attributeType="XML"
        begin="0s"
        from="${d1}"
        to="${d0}"
        dur="${speed}s" repeatCount="indefinite"
    />

    </path>

    `;
    }
  </script>
</notebook>
