<!doctype html>
<notebook theme="air">
  <title>Secure random ID</title>
  <script id="0" type="application/vnd.observable.javascript">
    md`# Secure random ID

    ~~~js
    import {randomId} from '@tomlarkworthy/randomid'
    ~~~

    `
  </script>
  <script id="15" type="application/vnd.observable.javascript" pinned="">
    example = randomId()
  </script>
  <script id="10" type="application/vnd.observable.javascript" pinned="">
    randomId = (len = 8) => {
      // From 'https://observablehq.com/@tomlarkworthy/randomid'
      // Avoid / and + and - and _ typof chars seen in base64
      const chars =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
      var array = new Uint32Array(len);
      window.crypto.getRandomValues(array);
      return [...array].map((v) => chars[v % chars.length]).join("");
    }
  </script>
</notebook>
