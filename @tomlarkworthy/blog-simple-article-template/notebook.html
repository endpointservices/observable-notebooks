<!doctype html>
<notebook theme="air">
  <title>BLOG: Simple Article Template</title>
  <script id="414" type="application/vnd.observable.javascript" pinned="">
    title = html`<div id="blogtitle" class=content>${
    md`# BLOG: Simple Article Template
    `}`
  </script>
  <script id="984" type="application/vnd.observable.javascript" pinned="">
    DESCRIPTION = `How this blog is deployed to Netlify by an open source notebook`
  </script>
  <script id="987" type="application/vnd.observable.javascript" pinned="">
    NOTEBOOK = "https://observablehq.com/@tomlarkworthy/blog-netlify-deployment-manager"
  </script>
  <script id="990" type="application/vnd.observable.javascript" pinned="">
    TAGS = ["article", "jamstack"]
  </script>
  <script id="994" type="application/vnd.observable.javascript" pinned="">
    IMAGE_URL = "https://static.observableusercontent.com/files/d1bc27d657c5492993abf9b628aba9cd957327a5593b4f523e092682a4b1b703c75a9041a3b9715ec9ebb7ed4ff5f99e916c738e93ad03073d3dbf5587af4ab1"
  </script>
  <script id="561" type="application/vnd.observable.javascript">
    md`Live ${metadata.url}`
  </script>
  <script id="524" type="application/vnd.observable.javascript">
    metadata = ({
      description: DESCRIPTION,
      notebook: NOTEBOOK,
      tags: TAGS,
      image: IMAGE_URL,
      get title() {
        return document.getElementById("blogtitle").innerText.replace("BLOG: ", "");
      },
      content: content.outerHTML,
      get target() {
        return `/blogs/${string_to_slug(this.title)}.html`;
      },
      twitterCreator: "@tomlarkworthy",
      get url() {
        return 'https://tomlarkworthy.endpointservices.net' + this.target;
      }
    })
  </script>
  <script id="504" type="application/vnd.observable.javascript">
    viewof settings = deployStaticFile({
      ...metadata,
      app_id: 'b6a918d2-9cda-4fde-b2ec-add91b22ea02',
      source: preview.href
    })
  </script>
  <script id="8" type="application/vnd.observable.javascript">
    preview = deploy("preview", (req, res) => {
      res.header("Access-Control-Allow-Origin", "*"); 
      return res.send(page)
    })
  </script>
  <script id="960" type="application/vnd.observable.javascript">
    md`# Social image

    ![](${metadata.image})`
  </script>
  <script id="0" type="application/vnd.observable.javascript" pinned="">
    content = 
    html`<div class=content>${
    md`

    MARKDOWN HERE

    `
    }`
  </script>
  <script id="590" type="application/vnd.observable.javascript">
    page = `<!doctype html>
    <html class="has-navbar-fixed-top">
      <head>
        ${articleHeader(metadata).outerHTML}
      </head>
      <body>
        ${topbar.outerHTML}
        <div class="columns">
          ${sidebar.outerHTML}
          <div class="column is-half">
            ${html`<div class="content"><h1>${metadata.title}`.outerHTML}
            ${content.outerHTML}
          </div>
        </div>
        ${articleFooter(metadata).outerHTML}
      </body>
    </html>`
  </script>
  <script id="938" type="application/vnd.observable.javascript">
    function string_to_slug (str) {
        str = str.replace(/^\s+|\s+$/g, ''); // trim
        str = str.toLowerCase();

        // remove accents, swap ñ for n, etc
        var from = "àáãäâèéëêìíïîòóöôùúüûñç·/_,:;";
        var to   = "aaaaaeeeeiiiioooouuuunc------";

        for (var i=0, l=from.length ; i<l ; i++) {
            str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
        }

        str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
            .replace(/\s+/g, '-') // collapse whitespace and replace by -
            .replace(/-+/g, '-'); // collapse dashes

        return str;
    }
  </script>
  <script id="408" type="application/vnd.observable.javascript">
    import {deployStaticFile} from '@tomlarkworthy/netlify-deploy'
  </script>
  <script id="242" type="application/vnd.observable.javascript">
    import {sidebar, topbar, articleHeader, articleFooter, deploy, html, svg} from '@tomlarkworthy/blog-navigation'
  </script>
  <script id="384" type="application/vnd.observable.javascript">
    import {icon} from "@chitacan/rss"
  </script>
</notebook>
